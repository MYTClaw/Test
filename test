import gi
gi.require_version('Gst', '1.0')
from gi.repository import Gst, GLib

Gst.init(None)

# Replace with your RTSP URL
rtsp_url = ""

pipeline_str = f"""
rtspsrc location={rtsp_url} latency=100 ! 
rtph264depay ! h264parse ! nvv4l2decoder ! 
nvvidconv ! fakesink
"""

pipeline = Gst.parse_launch(pipeline_str)
pipeline.set_state(Gst.State.PLAYING)

try:
    loop = GLib.MainLoop()
    print("RTSP pipeline running... Press Ctrl+C to stop.")
    loop.run()
except KeyboardInterrupt:
    print("Stopping pipeline...")
    pipeline.set_state(Gst.State.NULL)
